<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Previous head content remains the same -->
    <script src="https://cdn.jsdelivr.net/npm/@google/generative-ai@0.1.3/dist/generative-ai.min.js"></script>
</head>
<body>
    <!-- Previous HTML content remains the same -->
    <script>
        // Initialize Gemini AI
        const genAI = new GoogleGenerativeAI('AIzaSyC2RUbVzEpaD-MmkmoSSl0Eh2bQlMstevM');
        const messagesContainer = document.getElementById('messages');
        const chatForm = document.getElementById('chat-form');
        const userInput = document.getElementById('user-input');

        // Welcome message
        window.onload = () => {
            addMessage('assistant', 'Hello! I'm your AI assistant. How can I help you today?');
        };

        async function sendMessage(e) {
            e.preventDefault();
            const message = userInput.value.trim();
            if (!message) return;

            // Display user message
            addMessage('user', message);
            const currentInput = message;
            userInput.value = '';

            // Show typing indicator
            const loadingMessage = showTypingIndicator();

            try {
                // Generate response using Gemini
                const model = genAI.getGenerativeModel({ model: "gemini-pro" });
                const result = await model.generateContent(currentInput);
                const response = await result.response;
                const text = response.text();

                // Remove typing indicator and display AI response
                loadingMessage.remove();
                addMessage('assistant', text);
            } catch (error) {
                console.log('Error:', error);
                loadingMessage.remove();
                addMessage('assistant', 'I encountered an error. Please try again.');
            }
        }

        function addMessage(role, content) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${role}-message`;

            const avatar = document.createElement('div');
            avatar.className = `avatar ${role}-avatar`;
            avatar.textContent = role === 'user' ? 'ðŸ‘¤' : 'ðŸ¤–';

            const bubble = document.createElement('div');
            bubble.className = 'message-bubble';
            bubble.textContent = content;

            messageDiv.appendChild(avatar);
            messageDiv.appendChild(bubble);
            messagesContainer.appendChild(messageDiv);
            
            // Smooth scroll to latest message
            messageDiv.scrollIntoView({ behavior: 'smooth' });
            return messageDiv;
        }

        function showTypingIndicator() {
            const typingDiv = document.createElement('div');
            typingDiv.className = 'message assistant-message';
            
            const avatar = document.createElement('div');
            avatar.className = 'avatar ai-avatar';
            avatar.textContent = 'ðŸ¤–';

            const bubble = document.createElement('div');
            bubble.className = 'message-bubble typing-indicator';
            
            for (let i = 0; i < 3; i++) {
                const dot = document.createElement('div');
                dot.className = 'typing-dot';
                bubble.appendChild(dot);
            }

            typingDiv.appendChild(avatar);
            typingDiv.appendChild(bubble);
            messagesContainer.appendChild(typingDiv);
            typingDiv.scrollIntoView({ behavior: 'smooth' });

            return typingDiv;
        }

        chatForm.addEventListener('submit', sendMessage);
    </script>
</body>
</html>
